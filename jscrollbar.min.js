var jScrollBar=function(t){return new jScrollBar.prototype.init(t)};jScrollBar.prototype={constructor:jScrollBar,createElem:function(t){this.scrollBar=document.createElement("div"),this.sliderBar=document.createElement("span"),this.scrollBar.className="scroll-bar",this.scrollBar.appendChild(this.sliderBar),this.loadStyle(t),this.elem.appendChild(this.scrollBar),this.loadEvents()},loadStyle:function(t){var e,i={background:"#333",position:"absolute"},s={background:"#666",position:"absolute",cursor:"pointer",overflow:"hidden"};"v"==this.dir?(e=this.inner.offsetHeight/this.inner.scrollHeight,this.extend(i,{width:1,height:this.elem.clientHeight,top:0,right:2,display:1>e?"block":"none"}),this.extend(s,{width:5,height:e*this.elem.offsetHeight,top:0,left:-2})):"h"==this.dir&&(e=this.inner.offsetWidth/this.inner.scrollWidth,this.extend(i,{width:this.elem.clientWidth,height:1,lineHeight:1,left:0,bottom:2,display:1>e?"block":"none"}),this.extend(s,{width:e*this.elem.offsetWidth,height:5,left:0,top:-2})),t.barStyle&&this.extend(i,t.barStyle),t.sliderStyle&&this.extend(s,t.sliderStyle),this.css(this.scrollBar,i),this.css(this.sliderBar,s)},loadEvents:function(){var t=this;this.addEvent(this.inner,"scroll",function(){t.setSliderPos()}),this.addEvent(this.sliderBar,"mousedown",function(e){t.barMouseDown(e)}),this.addEvent(this.elem,"mousewheel",function(e){t.mouseScroll(e)}),this.addEvent(this.elem,"DOMMouseScroll",function(e){t.mouseScroll(e)})},setSliderPos:function(){var t,e,i,s;"v"==this.dir?(t="top",e=this.inner.scrollTop,i=this.inner.scrollHeight-this.inner.offsetHeight,s=this.scrollBar.offsetHeight-this.sliderBar.offsetHeight):"h"==this.dir&&(t="left",e=this.inner.scrollLeft,i=this.inner.scrollWidth-this.inner.offsetWidth,s=this.scrollBar.offsetWidth-this.sliderBar.offsetWidth),this.sliderBar.style[t]=e/i*s+"px"},barMouseDown:function(t){var t=t||window.event,e=this,i=t.clientX-this.sliderBar.offsetLeft,s=t.clientY-this.sliderBar.offsetTop;this.sliderBar.setCapture&&this.sliderBar.setCapture(),document.onmousemove=function(t){var r,n,o,l,t=t||window.event;"v"==e.dir?(r="scrollTop",n=t.clientY-s,o=e.scrollBar.offsetHeight-e.sliderBar.offsetHeight,l=e.inner.scrollHeight-e.inner.offsetHeight):"h"==e.dir&&(r="scrollLeft",n=t.clientX-i,o=e.scrollBar.offsetWidth-e.sliderBar.offsetWidth,l=e.inner.scrollWidth-e.inner.offsetWidth),e.inner[r]=n/o*l,e.preventDefault(t)},document.onmouseup=function(){e.sliderBar.releaseCapture&&e.sliderBar.releaseCapture(),document.onmousemove=null,document.onmouseup=null}},mouseScroll:function(t){var e,i,t=t||window.event,s=this.mouseDir(t);"v"==this.dir?(e=this.inner.scrollHeight-this.inner.offsetHeight,i="scrollTop"):"h"==this.dir&&(e=this.inner.scrollWidth-this.inner.offsetWidth,i="scrollLeft"),this.inner[i]+=(s>0?-1:1)*this.step,0!=this.inner[i]&&this.inner[i]<e&&this.preventDefault(t)},extend:function(t,e){for(attr in e)t[attr]=e[attr]},addEvent:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},removeEvent:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null},mouseDir:function(t){var e;return t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e},preventDefault:function(t){t.stopPropagation&&(t.preventDefault(),t.stopPropagation())||(t.cancelBubble=!0,t.returnValue=!1)},css:function(t,e){var i;for(s in e)i=e[s],"opacity"==s||isNaN(Number(i))||(i+="px"),t.style[s]=i}},jScrollBar.prototype.init=function(t){t&&(this.elem=t.elem||null,this.inner=t.inner||null,this.dir=t.dir||"v",this.step=40,this.createElem(t))},jScrollBar.prototype.init.prototype=jScrollBar.prototype;